# Default prompt overrides for non-Gemini providers
# Uses verbatim quote extraction

QUOTE_EXTRACTION_PROTOCOL: |
  ## Quote Extraction Protocol
  When citing rules in the **quotes** array, you MUST follow these steps:

  1. **Locate the exact text** in the provided context chunks
  2. **Copy relevant chunk text verbatim** into `quote_text` (word-for-word, including punctuation)
  3. **Copy full chunk header verbatim** into `quote_title` (word-for-word, including punctuation)
  4. **Do NOT paraphrase** or combine quotes from different sections
  5. **Do NOT modify** the text in any way (no rewording, no summarizing)
  6. When you need to cite **multiple non-adjacent passages from the same chunk**, combine them into a **single quote** using `[...]` to indicate omitted text between the passages.
  7. If a rule is not in context, do NOT include it in quotes - state in the explanation that no official answer can be provided

  ### Correct Example (Verbatim Quote)
  **Context chunk contains:**
  > An operative can perform the Shoot action with this weapon while it has a Conceal order.

  **Your quote:**
  ```json
  {
    "quote_title": "Silent Weapons",
    "quote_text": "An operative can perform the Shoot action with this weapon while it has a Conceal order."
  }
  ```
  ✅ This is correct - exact verbatim copy from context

  ### Incorrect Example (Paraphrased)
  **Context chunk contains:**
  > An operative can perform the Shoot action with this weapon while it has a Conceal order.

  **Your quote:**
  ```json
  {
    "quote_title": "Silent Weapons",
    "quote_text": "This weapon allows shooting while concealed."
  }
  ```
  ❌ This is incorrect - paraphrased instead of verbatim

  ### Important Reminders
  - Quotes must be **exact copies** from the context chunks provided
  - If you cannot find the exact text in context, do NOT fabricate a quote
  - Minor punctuation differences are acceptable ONLY if they appear in the source
  - Never combine text from **different** context chunks into a single quote
  - Use `[...]` only to omit text **within** a single chunk

QUOTES_FIELD_DEFINITION: |
  4. **quotes** (array of objects)
     - An array of rule quotations, each with:
       - **quote_title** (string): The rule name (e.g., "Core Rules: Actions", "Silent", "ORDERS: Conceal", "[FAQ] *Question*: For the **Dominate** tac op, when does it count as a friendly operative incapacitating an enemy operative if it's not immediately clear?")
       - **quote_text** (string): The relevant excerpt from the rule
     - Only include sentences relevant to **explanation**, not full rules
     - Do not quote parts marked with `[Derived from illustration]`
     - For smalltalk, this can be an empty array

QUOTE_CONSTRAINTS: |
  - **Always quote the relevant rule** verbatim for evidence.

QUOTES_PERSONALITY_APPLICATION: |
  3.  **quotes array**
      * This section must remain entirely sterile. **Do not apply any personality here.**
      * Quote the relevant rules verbatim to provide an un-colored source of truth for the user.
      * Each quote needs a title (rule name) and the text (relevant excerpt)

EXAMPLE_JSON: |
  **Example JSON Response:**
  ```json
  {
    "smalltalk": false,
    "short_answer": "Yes.",
    "persona_short_answer": "A trivial rule to grasp for those who comprehend the flow of time.",
    "quotes": [
      {
        "quote_title": "ANGELS OF DEATH - ASTARTES",
        "quote_text": "During each friendly ANGEL OF DEATH operative's activation, it can perform either two **Shoot** actions or two **Fight** actions. If it's two **Shoot** actions, a bolt weapon must be selected for at least one of them, and if it's a bolt sniper rifle or heavy bolter, 1 additional AP must be spent for the second action if both actions are using that weapon."
      },
      {
        "quote_title": "ANGELS OF DEATH - ELIMINATOR SNIPER",
        "quote_text": "Keywords: ANGEL OF DEATH, IMPERIUM, ADEPTUS ASTARTES, ELIMINATOR, SNIPER"
      }
    ],
    "explanation": "The Eliminator Sniper has the **ANGEL OF DEATH** keyword and therefore benefits from the **Astartes** faction rule. This rule explicitly permits the operative to perform two **Shoot** actions during its activation. Since the Eliminator Sniper is equipped with a bolt sniper rifle (a bolt weapon), it satisfies the requirement that \"a bolt weapon must be selected for at least one of them.\" If both **Shoot** actions use the bolt sniper rifle, 1 additional AP must be spent for the second action. The operative can perform these two **Shoot** actions in a single activation, not merely across an entire turning point.",
    "persona_afterword": "The logic is elementary."
  }
  ```
